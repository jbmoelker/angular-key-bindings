angular.module("voorhoede.components.keyBindings",["voorhoede.components.keyBindings.directives.keyBinding","voorhoede.components.keyBindings.services.keyBindings"]),angular.module("voorhoede.components.keyBindings.directives.keyBinding",[]).directive("keyBinding",["keyBindings",function(o){return{restrict:"E",scope:{combo:"@",handler:"&"},link:function(n){function e(){r&&r(),r=null}function i(o,e){var i=n.handler({$event:o,$combo:e});return n.$apply(),i}var r;n.$watch("combo",function(n){e(),n&&(r=o.addHandler({combo:n,handler:i}))}),n.$on("$destroy",function(){e()})}}}]),angular.module("voorhoede.components.keyBindings.services.keyBindings",[]).service("keyBindings",function(){var o=this;o.comboGroups={},o.addHandler=function(n){if(!n||!n.combo)throw new Error("[keyBindings] handlers must specify a combo");return o.comboGroups[n.combo]||(o.comboGroups[n.combo]=[],o.bindCombo(n.combo)),o.comboGroups[n.combo].push(n),function(){var e,i=o.comboGroups[n.combo];i&&(e=i.indexOf(n),e>-1&&(i.splice(e,1),i.length||(o.unbindCombo(n.combo),o.comboGroups[n.combo]=null)))}},o.bindCombo=function(n){Mousetrap.bind(n,function(e,i){o.triggerHandlers(o.comboGroups[n],e,i)})},o.unbindCombo=function(o){Mousetrap.unbind(o)},o.triggerHandlers=function(o,n,e){for(var i=!0,r=o.length;i&&r-->0;)i=o[r].handler(n,e)===!0}});